@if (tableData.length > 0) {
  <p-table [value]="tableData" sortField="ID" [sortOrder]="1">
    <ng-template pTemplate="header">
      <tr>
        @for (col of columns; track col) {
          <th [pSortableColumn]="col">
            {{col}}
            <p-sortIcon [field]="col"/>
          </th>
        }
        <th class="actions-col" style="height: unset;">
          Actions
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-row>
    <tr [ngStyle]="{
      'background-color': row.colour,
    }">
        @for (col of columns; track col) {
          <td
            [ngStyle]="{'min-width': col != 'ID' ? '140px' : '100px'}">
            @if (!row.edit || col=='ID') {
              <span>{{row[col]}}</span>
            }
            @if (row.edit && col!='ID') {
              <input type="text" pInputText [(ngModel)]="row[col]"
                style="width: 100%; margin-left: -16px; padding: 12px 16px;"/>
            }
          </td>
        }
      <td class="actions-col" style="background-color: white; 
      display: flex; flex-direction: row; align-items: center; justify-content: center;"
      [ngStyle]="{
        'flex-direction': innerWidth < 800 ? 'column' : 'row',
        'height': innerWidth < 800 ? '120px' : '80px'
      }">
          @if (!editing) {
            <button mat-mini-fab color="primary" title="Edit Row"
              [ngStyle]="{'margin': innerWidth < 800 ? '0 0 8px 0' : '0 8px 0 0'}" (click)="edit(row)">
              <mat-icon>edit</mat-icon>
            </button>
          }
          @if (!editing) {
            <button mat-mini-fab color="accent" title="Delete Row"
              (click)="delete(row)">
              <mat-icon>delete</mat-icon>
            </button>
          }
          @if (row.edit) {
            <button mat-mini-fab color="primary" title="Save Row"
              [ngStyle]="{'margin': innerWidth < 800 ? '0 0 8px 0' : '0 8px 0 0'}" (click)="save()">
              <mat-icon>save</mat-icon>
            </button>
          }
          @if (row.edit) {
            <button mat-mini-fab color="accent" title="Cancel Editing"
              (click)="cancel()">
              <mat-icon>cancel</mat-icon>
            </button>
          }
        </td>
      </tr>
    </ng-template>
  </p-table>
}